<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
    <%= title %>
</title>

<!-- CSS Global -->
<link rel="stylesheet" href="/css/main.css?v=28">
<link rel="stylesheet" href="/css/sidebar.css?v=1">
<link rel="stylesheet" href="/css/modal.css?v=28">

<!-- CSS Específicos (Grid/Dashboard) - Mantendo aqui por enquanto para compatibilidade -->
<link rel="stylesheet" href="/css/grid.css?v=28">
<link rel="stylesheet" href="/css/grid-premium.css?v=28">
<link rel="stylesheet" href="/css/modal-edicao.css?v=28">
<link rel="stylesheet" href="/css/toolbar.css?v=28">
<link rel="stylesheet" href="/css/footer.css?v=28">

<!-- Google Fonts: Inter -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<Link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://unpkg.com/@phosphor-icons/web" defer></script>

<% if (locals.useTailwind) { %>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            corePlugins: {
                preflight: false,
            }
        }
    </script>
    <% } %>

        <!-- Inline Script para evitar FOUC (Flash of Unstyled Content) -->
        <script>
                (function () {
                    // Tenta recuperar estado do LocalStorage
                    const savedState = localStorage.getItem('sidebar_state_v1');
                    // Se estiver colapsado, aplica classe IMEDIATAMENTE antes do render
                    if (savedState === 'collapsed') {
                        document.documentElement.classList.add('sidebar-collapsed-preload');
                    }
                })();
        </script>

        <style>
            /* Aplica estilos críticos antes do CSS carregar */
            html.sidebar-collapsed-preload body {
                /* Garante que o body herde a classe se aplicada no html */
            }

            /* Força estado inicial se a classe estiver presente no HTML/Body */
            html.sidebar-collapsed-preload .sidebar {
                width: 72px !important;
            }

            html.sidebar-collapsed-preload .main-content {
                margin-left: 72px !important;
                width: calc(100% - 72px) !important;
            }

            html.sidebar-collapsed-preload .brand-text,
            html.sidebar-collapsed-preload .menu-label,
            html.sidebar-collapsed-preload .nav-text,
            html.sidebar-collapsed-preload .brand-wrapper {
                display: none !important;
            }
        </style>

        <!-- Extracted Styles -->
        <%- style %>